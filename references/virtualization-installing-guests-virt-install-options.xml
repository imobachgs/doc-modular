<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
[
  <!ENTITY % entities SYSTEM "../common/generic-entities.ent">
    %entities;
]>
<!-- refers to legacy doc: <add github link to legacy doc piece, if applicable> -->
<!-- point back to this document with a similar comment added to your legacy doc piece -->
<!-- refer to README.md for file and id naming conventions -->
<!-- metadata is dealt with on the assembly level -->
<topic xml:id="reference-example"
 role="reference" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
   <title>Using the <command>virt-install</command> command</title><!-- can be changed via merge in the assembly -->
    <!--add author's email address-->
    <meta name="maintainer" content="tbazant@suse.com" its:translate="no"/>
    <abstract><!-- can be changed via merge in the assembly -->
      <para>
       The <command>virt-install</command> command provides many options to deploy a VM according to your needs.
      </para>
    </abstract>
  </info>
  <para>
    The <command>virt-install</command> accepts many options. The list of options follows, only the mandatory options are marked. The other options are optional.
  </para>
  <variablelist>
    <varlistentry>
      <term><option>--name <replaceable>VM_GUEST_NAME</replaceable> (<emphasis></emphasis>required option</option>)</term>
      <listitem>
        <para>Specify the name of the new virtual machine. The name must be unique across all guests known to the hypervisor on the same connection. It is used to create and name the guestâ€™s configuration file and you can access the guest with this name from <command>virsh</command>. Alphanumeric and <literal>_-.:+</literal> characters are allowed.</para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--memory
                <replaceable>MEMORY_TO_ALLOCATE</replaceable> (<emphasis>required option</emphasis>)</option></term>
                <listitem>
                  <para>
                    Specify
                the amount of memory to allocate for the new virtual machine in
                megabytes.
                  </para>
                </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--vcpus
                <replaceable>NUMBER_OF_CPUS</replaceable></option></term>
                <listitem>
                  <para>
                    Specify the
                number of virtual CPUs. For best performance, the number of
                virtual processors should be less than or equal to the number
                of physical processors.
                  </para>
                </listitem>
    </varlistentry>
    <variablelist>

    <para>
      The following options define the virtualization type.
    </para>
    <variablelist>
    <varlistentry>
      <term><option>--paravirt</option></term>
      <listitem>
        <para>
         To set up a paravirtualized guest.
                This is the default if the &vmhost; supports paravirtualization
                and full virtualization.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--hvm</option></term>
      <listitem>
        <para>To set up a fully virtualized guest.</para>
      </listitem>
      </varlistentry>
      <varlistentry>
        <term>--virt-type <replaceable>HYPERVISOR</replaceable></term>
        <listitem>
          <para>
            Specify the
                hypervisor. Supported values are <literal>kvm</literal><phrase os="sles;alp"> or
                <literal>xen</literal></phrase>.
          </para>
        </listitem>
      </varlistentry>
  </variablelist>
  <para> Specify <emphasis role="bold">one</emphasis> option of the guest storage options:</para>
  <variablelist>
    <varlistentry>
      <term><option>--disk size=<replaceable>SIZE_IN_GB</replaceable></option></term>
      <listitem>
        <para>
          The option creates a disk of the specified size in the default image location of the hypervisor.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--filesystem <replaceable>ABSOLUTE_PATH</replaceable></option></term>
      <listitem>
        <para>
          Specify an absolute path to a directory on the host machine to be exported to the &vmguest;.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--nodisks</option></term>
      <listitem>
        <para>
          To set up a &vmguest; without a local storage.
        </para>
      </listitem>
    </varlistentry>
  </variablelist>
  <para>
    Specify <emphasis role="bold">one</emphasis> installation method option:
  </para>
  <variablelist>
    <varlistentry>
      <term><option>--location <replaceable>INSTALLATION_SOURCE_LOCATION</replaceable></option></term>
      <listitem>
        <para>
          The <option>--location</option> option spefifies the distribution tree installation source. It can be either a path to a directory containing na installable distribution image, a path to an ISO, an NFS server, an HTTP server, or an FTP server.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--pxe</option></term>
      <listitem>
        <para>
          To use the PXE boot protocol to load the initial ramdisk and kernel for starting the guest installation process.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--import</option></term>
      <listitem>
        <para>
          To import an existing disk image without actual installation of the system.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term><option>--boot</option></term>
      <listitem>
        <para>
          When specified without other installation option, the <option>--boot</option> option acts similar as the <option>--import</option>. If used with another installation option, it specifies post-install &vmguest; configuration (like boot device priority).
        </para>
      </listitem>
    </varlistentry>
    </variablelist>
  <para>
    The following options specifying how the &vmguest; can be accessed are optional.
  </para>
  <variablelist>
    <varlistentry>
      <term><option>--graphics
            <replaceable>VALUE</replaceable></option></term>
      <listitem>
        <para>
To specify how to
            access the installation. &productname; supports the values
            <literal>vnc</literal> or <literal>none</literal>
        </para>
        <para>
            If using VNC, <command>virt-install</command> tries to launch
            <command>virt-viewer</command>. If it is not installed or cannot be
            run, connect to the &vmguest; manually with your preferred viewer.
            To explicitly prevent <command>virt-install</command> from
            launching the viewer, use <option>--noautoconsole</option>. To
            define a password for accessing the VNC session, use the following
            syntax: <option>--graphics
            vnc,password=<replaceable>PASSWORD</replaceable></option>.
          </para>
          <para>
            In case you are using <option>--graphics none</option>, you can
            access the &vmguest; through operating system supported services,
            such as SSH or VNC. Refer to the operating system installation
            manual on how to set up these services in the installation system.
          </para>
      </listitem>
    </varlistentry>
  </variablelist>
</topic>
